# P8.3.2 Navigation and Routing System Test Plan

## 1. Overview and Objectives

### 1.1 Purpose
This document provides detailed step-by-step instructions for system testing navigation and routing. These tests verify that all routes work correctly, navigation links function, and URL structures are proper.

### 1.2 Scope
This implementation plan covers task P8.3.2:
- **P8.3.2**: Test navigation and routing
  - Test all routes
  - Test navigation links
  - Test breadcrumbs
  - Test URL structure
  - Test route parameters
  - Test 404 handling

### 1.3 Success Criteria
- All routes tested
- Navigation links work
- Breadcrumbs display correctly
- URL structure verified
- 404 errors handled properly
- All tests pass consistently

## 2. Prerequisites

### 2.1 Required Knowledge
- Laravel routing
- Navigation structure
- URL testing

### 2.2 Dependencies
- Task P4.7.1 completed (Navigation implemented)
- All routes configured
- Navigation components created

### 2.3 Reference Documents
- Routes: `routes/web.php`, `routes/admin.php`, `routes/api.php`
- Testing Strategy: `documentation/02-project-management/06-testing-strategy.md`

## 3. Existing Implementation Review

### 3.1 Current State
Routes are configured in:
- `routes/web.php` - Web routes
- `routes/admin.php` - Admin routes
- `routes/api.php` - API routes

### 3.2 What Needs to Be Done
- Create comprehensive routing tests
- Test navigation links
- Test breadcrumbs
- Test URL parameters
- Test 404 handling

## 4. Task P8.3.2: Test Navigation and Routing

### 4.1 Overview
Create comprehensive system tests for navigation and routing by:
1. Testing all web routes
2. Testing navigation links
3. Testing breadcrumbs
4. Testing URL parameters
5. Testing 404 handling

### 4.2 Test Structure

Routing tests should follow this structure:
```php
<?php

namespace Tests\Feature;

use Tests\TestCase;
use Illuminate\Foundation\Testing\RefreshDatabase;

class NavigationRoutingTest extends TestCase
{
    use RefreshDatabase;

    // Test methods
}
```

### 4.3 Step-by-Step Implementation

#### Step 1: Create Route Tests

**File: `tests/Feature/NavigationRoutingTest.php`** (new)

**Test Coverage Required:**
- All main routes accessible
- Route parameters work
- Route constraints work
- 404 for invalid routes

**Key Test Cases:**
```php
public function test_homepage_route_works(): void
{
    $response = $this->get('/');
    $response->assertStatus(200);
}

public function test_about_us_route_works(): void
{
    Page::factory()->create(['slug' => 'about-us', 'is_published' => true]);
    $response = $this->get('/about-us');
    $response->assertStatus(200);
}

public function test_blog_listing_route_works(): void
{
    $response = $this->get('/blog');
    $response->assertStatus(200);
}

public function test_blog_post_route_works(): void
{
    $post = BlogPost::factory()->create(['slug' => 'test-post', 'is_published' => true]);
    $response = $this->get("/blog/{$post->slug}");
    $response->assertStatus(200);
}

public function test_invalid_route_returns_404(): void
{
    $response = $this->get('/non-existent-page');
    $response->assertStatus(404);
}
```

#### Step 2: Create Navigation Link Tests

**File: `tests/Feature/NavigationLinksTest.php`** (new)

**Test Coverage Required:**
- Main navigation links work
- Footer links work
- Mobile navigation works
- All links point to valid routes

**Key Test Cases:**
```php
public function test_main_navigation_links_exist(): void
{
    $response = $this->get('/');
    
    $response->assertSee(route('home'));
    $response->assertSee(route('about-us'));
    $response->assertSee(route('strengths-programme'));
    $response->assertSee(route('blog.index'));
    $response->assertSee(route('contact'));
}

public function test_footer_links_exist(): void
{
    $response = $this->get('/');
    
    $response->assertSee(route('privacy'));
    $response->assertSee(route('contact'));
}

public function test_navigation_links_are_clickable(): void
{
    $response = $this->get('/');
    
    // Verify links have proper href attributes
    $response->assertSee('href="' . route('about-us') . '"');
    $response->assertSee('href="' . route('contact') . '"');
}
```

#### Step 3: Create Breadcrumb Tests

**File: `tests/Feature/BreadcrumbTest.php`** (new)

**Test Coverage Required:**
- Breadcrumbs display on pages
- Breadcrumb links work
- Breadcrumb structure correct

**Key Test Cases:**
```php
public function test_breadcrumbs_display_on_page(): void
{
    $page = Page::factory()->create(['slug' => 'test-page', 'is_published' => true]);
    $response = $this->get("/test-page");
    
    $response->assertSee('Home');
    $response->assertSee($page->title);
}

public function test_breadcrumb_links_work(): void
{
    $page = Page::factory()->create(['slug' => 'test-page', 'is_published' => true]);
    $response = $this->get("/test-page");
    
    $response->assertSee('href="' . route('home') . '"');
}
```

## 5. Test Implementation Guidelines

### 5.1 Route Testing

**Test Routes:**
```php
$response = $this->get('/route');
$response->assertStatus(200);
```

### 5.2 Link Testing

**Test Links:**
```php
$response->assertSee(route('route.name'));
$response->assertSee('href="' . route('route.name') . '"');
```

## 6. Validation Steps

### 6.1 Code Validation

1. **Check all test files exist:**
   ```bash
   find tests/Feature -name "*Navigation*Test.php" -o -name "*Routing*Test.php"
   ```

2. **Verify test structure:**
   - All tests extend `TestCase`
   - All tests use `RefreshDatabase` trait

### 6.2 Test Execution

1. **Run all routing tests:**
   ```bash
   php artisan test tests/Feature --filter Navigation
   ```

### 6.3 Functional Validation

1. **Manual Testing:**
   - Click all navigation links
   - Verify routes work
   - Test breadcrumbs
   - Check for broken links

## 7. Success Criteria Checklist

- [ ] Route tests created
- [ ] Navigation link tests created
- [ ] Breadcrumb tests created
- [ ] All routes tested
- [ ] All links verified
- [ ] 404 handling tested
- [ ] All tests pass consistently

## 8. Next Steps

After completing P8.3.2:
- Proceed to P8.3.3: Test responsive design
- Review test coverage

## 9. Notes

- Test all navigation links
- Verify routes return correct status codes
- Test both valid and invalid routes
- Check breadcrumb structure
- Verify mobile navigation works

---

**Document Version:** 1.0  
**Last Updated:** 2025-01-27  
**Status:** Ready for Implementation
