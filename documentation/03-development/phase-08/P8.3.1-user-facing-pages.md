# P8.3.1 User-Facing Pages System Test Plan

## 1. Overview and Objectives

### 1.1 Purpose
This document provides detailed step-by-step instructions for system testing all user-facing pages. These tests verify that pages render correctly, content displays properly, and all interactive elements work.

### 1.2 Scope
This implementation plan covers task P8.3.1:
- **P8.3.1**: Test all user-facing pages
  - Test homepage rendering
  - Test static pages
  - Test blog pages
  - Test contact page
  - Test dynamic pages
  - Test page content accuracy
  - Test interactive elements

### 1.3 Success Criteria
- All user-facing pages tested
- Pages render correctly
- Content displays accurately
- Interactive elements work
- No broken links
- All tests pass consistently

## 2. Prerequisites

### 2.1 Required Knowledge
- Laravel feature testing
- Page rendering
- Content verification
- Link testing

### 2.2 Dependencies
- Task P4.7.3 completed (All pages implemented)
- Pages created in database
- Content migrated

### 2.3 Reference Documents
- Testing Strategy: `documentation/02-project-management/06-testing-strategy.md`
- Existing tests: `tests/Feature/HomepageTest.php`, `tests/Feature/PageTest.php`

## 3. Existing Implementation Review

### 3.1 Current State
The following page tests exist:
- `HomepageTest.php` - Basic homepage tests
- `PageTest.php` - Basic page tests
- `BlogTest.php` - Basic blog tests

### 3.2 What Needs to Be Done
- Enhance existing page tests
- Test all static pages
- Test all dynamic pages
- Test page content
- Test page SEO elements
- Test page links

## 4. Task P8.3.1: Test All User-Facing Pages

### 4.1 Overview
Create comprehensive system tests for all user-facing pages by:
1. Testing homepage sections
2. Testing static pages
3. Testing dynamic pages
4. Testing blog pages
5. Testing contact page
6. Verifying content accuracy

### 4.2 Test Structure

Page system tests should follow this structure:
```php
<?php

namespace Tests\Feature;

use Tests\TestCase;
use App\Models\Page;
use Illuminate\Foundation\Testing\RefreshDatabase;

class UserFacingPagesTest extends TestCase
{
    use RefreshDatabase;

    // Test methods
}
```

### 4.3 Step-by-Step Implementation

#### Step 1: Enhance Homepage Tests

**File: `tests/Feature/HomepageTest.php`** (enhance existing)

**Additional Test Coverage:**
- All homepage sections display
- Hero section content
- Testimonials display
- CTAs work
- Forms functional
- Links work

**Key Test Cases to Add:**
```php
public function test_homepage_displays_all_sections(): void
{
    $response = $this->get('/');

    $response->assertStatus(200);
    $response->assertSee('Build Strong Teams');
    $response->assertSee('What is the Power of Strengths?');
    $response->assertSee('Three Pillars of Success');
    $response->assertSee('Why Strong Teams Fail');
    $response->assertSee('Why The Strengths Toolbox?');
    $response->assertSee('Results You Can Expect');
    $response->assertSee('What You\'ll Experience');
    $response->assertSee('How it Works');
    $response->assertSee('Client Testimonials');
}

public function test_homepage_ctas_are_clickable(): void
{
    $response = $this->get('/');

    $response->assertSee(route('contact'));
    $response->assertSee(route('strengths-programme'));
}

public function test_homepage_testimonials_display(): void
{
    Testimonial::factory()->count(3)->create(['is_published' => true]);

    $response = $this->get('/');

    $response->assertStatus(200);
    $response->assertSee('Testimonial');
}
```

#### Step 2: Create Static Pages Tests

**File: `tests/Feature/StaticPagesTest.php`** (new)

**Test Coverage Required:**
- About Us page
- Strengths Programme page
- Contact page
- All existing content pages
- Page content accuracy

**Key Test Cases:**
```php
public function test_about_us_page_displays(): void
{
    $page = Page::factory()->create([
        'slug' => 'about-us',
        'title' => 'About Us',
        'is_published' => true,
    ]);

    $response = $this->get('/about-us');

    $response->assertStatus(200);
    $response->assertSee($page->title);
    $response->assertSee($page->content);
}

public function test_strengths_programme_page_displays(): void
{
    $page = Page::factory()->create([
        'slug' => 'strengths-programme',
        'title' => 'Strengths Programme',
        'is_published' => true,
    ]);

    $response = $this->get('/strengths-programme');

    $response->assertStatus(200);
    $response->assertSee($page->title);
}

public function test_contact_page_displays_form(): void
{
    $response = $this->get('/contact');

    $response->assertStatus(200);
    $response->assertSee('Contact');
    $response->assertSee('name');
    $response->assertSee('email');
    $response->assertSee('message');
}
```

#### Step 3: Create Dynamic Pages Tests

**File: `tests/Feature/DynamicPagesTest.php`** (new)

**Test Coverage Required:**
- Dynamic pages render
- Page content displays
- SEO elements present
- Unpublished pages not accessible

**Key Test Cases:**
```php
public function test_dynamic_page_renders_correctly(): void
{
    $page = Page::factory()->create([
        'slug' => 'test-page',
        'title' => 'Test Page',
        'content' => 'Test content',
        'is_published' => true,
    ]);

    $response = $this->get('/test-page');

    $response->assertStatus(200);
    $response->assertSee($page->title);
    $response->assertSee($page->content);
}

public function test_unpublished_page_returns_404(): void
{
    $page = Page::factory()->create([
        'slug' => 'unpublished-page',
        'is_published' => false,
    ]);

    $response = $this->get('/unpublished-page');

    $response->assertStatus(404);
}

public function test_page_includes_seo_meta_tags(): void
{
    $page = Page::factory()->create([
        'slug' => 'seo-page',
        'title' => 'SEO Page',
        'is_published' => true,
    ]);
    $page->seo()->create([
        'meta_title' => 'SEO Meta Title',
        'meta_description' => 'SEO Meta Description',
    ]);

    $response = $this->get('/seo-page');

    $response->assertStatus(200);
    $response->assertSee('SEO Meta Title', false);
    $response->assertSee('SEO Meta Description', false);
}
```

#### Step 4: Create Blog Pages Tests

**File: `tests/Feature/BlogPagesTest.php`** (enhance existing)

**Additional Test Coverage:**
- Blog listing page
- Individual blog post pages
- Category pages
- Tag pages
- Related posts
- Pagination

**Key Test Cases to Add:**
```php
public function test_blog_listing_displays_posts(): void
{
    BlogPost::factory()->count(10)->create(['is_published' => true]);

    $response = $this->get('/blog');

    $response->assertStatus(200);
    $response->assertSee('Blog');
}

public function test_blog_post_displays_correctly(): void
{
    $post = BlogPost::factory()->create([
        'slug' => 'test-post',
        'title' => 'Test Post',
        'is_published' => true,
    ]);

    $response = $this->get("/blog/test-post");

    $response->assertStatus(200);
    $response->assertSee($post->title);
    $response->assertSee($post->content);
}

public function test_blog_category_page_displays_posts(): void
{
    $category = Category::factory()->create(['slug' => 'test-category']);
    $post = BlogPost::factory()->create(['is_published' => true]);
    $post->categories()->attach($category);

    $response = $this->get('/blog/category/test-category');

    $response->assertStatus(200);
    $response->assertSee($post->title);
}
```

## 5. Test Implementation Guidelines

### 5.1 Content Verification

**Verify Page Content:**
```php
$response = $this->get('/page-slug');
$response->assertSee('Expected Content');
$response->assertSeeText('Expected Text');
```

### 5.2 Link Testing

**Test Links:**
```php
$response = $this->get('/');
$response->assertSee(route('contact'));
$response->assertSee('href="' . route('contact') . '"');
```

### 5.3 SEO Element Testing

**Test SEO Elements:**
```php
$response = $this->get('/page');
$response->assertSee('<title>', false);
$response->assertSee('meta name="description"', false);
```

## 6. Validation Steps

### 6.1 Code Validation

1. **Check all test files exist:**
   ```bash
   find tests/Feature -name "*Page*Test.php" -o -name "*Blog*Test.php"
   ```

2. **Verify test structure:**
   - All tests extend `TestCase`
   - All tests use `RefreshDatabase` trait

### 6.2 Test Execution

1. **Run all page tests:**
   ```bash
   php artisan test tests/Feature --filter Page
   ```

2. **Run specific test:**
   ```bash
   php artisan test tests/Feature/HomepageTest.php
   ```

### 6.3 Functional Validation

1. **Manual Testing:**
   - Visit each page manually
   - Verify content displays
   - Test all links
   - Check for broken elements

2. **Content Verification:**
   - Verify content accuracy
   - Check for typos
   - Verify images load
   - Check formatting

## 7. Success Criteria Checklist

- [ ] Homepage tests enhanced
- [ ] Static pages tests created
- [ ] Dynamic pages tests created
- [ ] Blog pages tests enhanced
- [ ] All pages tested
- [ ] Content verified
- [ ] Links tested
- [ ] SEO elements verified
- [ ] All tests pass consistently

## 8. Next Steps

After completing P8.3.1:
- Proceed to P8.3.2: Test navigation and routing
- Review test coverage
- Address any gaps

## 9. Notes

- Test both published and unpublished pages
- Verify content accuracy against requirements
- Test all interactive elements
- Check for broken links
- Verify SEO elements are present
- Test with different content scenarios

---

**Document Version:** 1.0  
**Last Updated:** 2025-01-27  
**Status:** Ready for Implementation
